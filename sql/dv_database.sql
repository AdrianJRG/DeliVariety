-- MySQL Script generated by MySQL Workbench
-- 10/01/16 15:22:07
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema DeliVariety
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `DeliVariety` ;

-- -----------------------------------------------------
-- Schema DeliVariety
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DeliVariety` DEFAULT CHARACTER SET utf8 ;
USE `DeliVariety` ;

-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_USER` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_USER` (
  `user_id` VARCHAR(6) NOT NULL,
  `username` VARCHAR(15) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `firstname` VARCHAR(20) NULL,
  `lastname` VARCHAR(20) NOT NULL,
  `birthday` DATE NULL,
  `gender` VARCHAR(6) NULL,
  `email` VARCHAR(30) NOT NULL,
  `phone` VARCHAR(20) NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_CATEGORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_CATEGORY` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_CATEGORY` (
  `category_id` INT NOT NULL AUTO_INCREMENT,
  `category_name` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`category_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_MENU`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_MENU` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_MENU` (
  `item_id` VARCHAR(15) NOT NULL,
  `item_name` VARCHAR(45) NOT NULL,
  `item_img` VARCHAR(100) NOT NULL,
  `price` DECIMAL(4,2) NOT NULL,
  `category_id` INT NOT NULL,
  PRIMARY KEY (`item_id`, `category_id`),
  INDEX `fk_DV_MENU_DV_CATEGORY_idx` (`category_id` ASC),
  UNIQUE INDEX `item_id_UNIQUE` (`item_id` ASC),
  CONSTRAINT `fk_DV_MENU_DV_CATEGORY`
    FOREIGN KEY (`category_id`)
    REFERENCES `DeliVariety`.`DV_CATEGORY` (`category_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_CUSTOMER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_CUSTOMER` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_CUSTOMER` (
  `firstname` VARCHAR(20) NULL,
  `lastname` VARCHAR(20) NOT NULL,
  `email` VARCHAR(30) NOT NULL,
  `address` VARCHAR(45) NOT NULL,
  `gender` VARCHAR(6) NULL,
  `phone` VARCHAR(20) NULL,
  PRIMARY KEY (`email`, `lastname`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_RESERVATION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_RESERVATION` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_RESERVATION` (
  `table_id` INT NOT NULL AUTO_INCREMENT,
  `table_state` TINYINT(1) NULL,
  `email` VARCHAR(30) NOT NULL,
  `lastname` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`table_id`, `email`, `lastname`),
  INDEX `fk_DV_RESERVATION_DV_CUSTOMER1_idx` (`email` ASC, `lastname` ASC),
  CONSTRAINT `fk_DV_RESERVATION_DV_CUSTOMER1`
    FOREIGN KEY (`email` , `lastname`)
    REFERENCES `DeliVariety`.`DV_CUSTOMER` (`email` , `lastname`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_ORDER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_ORDER` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_ORDER` (
  `order_id` INT NOT NULL,
  `date` DATETIME NULL,
  `email` VARCHAR(30) NOT NULL,
  `lastname` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`order_id`, `email`, `lastname`),
  INDEX `fk_DV_ORDER_DV_CUSTOMER1_idx` (`email` ASC, `lastname` ASC),
  UNIQUE INDEX `order_id_UNIQUE` (`order_id` ASC),
  CONSTRAINT `fk_DV_ORDER_DV_CUSTOMER1`
    FOREIGN KEY (`email` , `lastname`)
    REFERENCES `DeliVariety`.`DV_CUSTOMER` (`email` , `lastname`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DeliVariety`.`DV_ORDER_HISTORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DeliVariety`.`DV_ORDER_HISTORY` ;

CREATE TABLE IF NOT EXISTS `DeliVariety`.`DV_ORDER_HISTORY` (
  `order_id` INT NOT NULL,
  `item_id` VARCHAR(15) NOT NULL,
  `quantity` INT NULL,
  PRIMARY KEY (`order_id`, `item_id`),
  INDEX `fk_DV_ORDER_HISTORY_DV_MENU1_idx` (`item_id` ASC),
  UNIQUE INDEX `order_id_UNIQUE` (`order_id` ASC),
  UNIQUE INDEX `item_id_UNIQUE` (`item_id` ASC),
  CONSTRAINT `fk_DV_ORDER_HISTORY_DV_ORDER1`
    FOREIGN KEY (`order_id`)
    REFERENCES `DeliVariety`.`DV_ORDER` (`order_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DV_ORDER_HISTORY_DV_MENU1`
    FOREIGN KEY (`item_id`)
    REFERENCES `DeliVariety`.`DV_MENU` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DeliVariety`.`DV_CATEGORY`
-- -----------------------------------------------------
START TRANSACTION;
USE `DeliVariety`;
INSERT INTO `DeliVariety`.`DV_CATEGORY` (`category_id`, `category_name`) VALUES (1, 'Snacks');
INSERT INTO `DeliVariety`.`DV_CATEGORY` (`category_id`, `category_name`) VALUES (2, 'Steaks');
INSERT INTO `DeliVariety`.`DV_CATEGORY` (`category_id`, `category_name`) VALUES (3, 'Noodles');
INSERT INTO `DeliVariety`.`DV_CATEGORY` (`category_id`, `category_name`) VALUES (4, 'Dumplings');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DeliVariety`.`DV_MENU`
-- -----------------------------------------------------
START TRANSACTION;
USE `DeliVariety`;
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('snack1', 'Pizza Roll', 'menu_snack1.png', 4.70, 1);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('snack2', 'Fries', 'menu_snack2.png', 2.80, 1);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('snack3', 'Bruschetta with Warm Tomatoes', 'menu_snack3.png', 6.30, 1);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('snack4', 'Beef & Potato Croquettes', 'menu_snack4.png', 5.90, 1);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('steak1', 'Brazilian Skirt Steak with Golden Garlic Butter', 'menu_steak1.png', 14.80, 2);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('steak2', 'Cola- Marinated Flank Steak', 'menu_steak2.png', 12.60, 2);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('steak3', 'Home-Cooked Meal of Steak and Potatoes', 'menu_steak3.png', 13.50, 2);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('steak4', 'Stewed Steak', 'menu_steak4.png', 9.80, 2);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('noodle1', 'Beef Noodles', 'menu_noodle1.png', 7.80, 3);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('noodle2', 'Cold Noodles', 'menu_noodle2.png', 5.60, 3);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('noddle3', 'Wok Noodles', 'menu_noodle3.png', 6.90, 3);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('noddle4', 'Hot Oil Noddles', 'menu_noodle4.png', 6.40, 3);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('dumpling1', 'Fried Dumplings', 'menu_dumpling1.png', 5.40, 4);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('dumpling2', 'Dumplings Regular', 'menu_dumpling2.png', 5.20, 4);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('dumpling3', 'Soup Dumplings', 'menu_dumpling3.png', 6.30, 4);
INSERT INTO `DeliVariety`.`DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES ('dumpling4', 'Dumplings Vegeterian', 'menu_dumpling4.png', 4.80, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DeliVariety`.`DV_RESERVATION`
-- -----------------------------------------------------
START TRANSACTION;
USE `DeliVariety`;
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (1, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (2, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (3, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (4, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (5, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (6, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (7, 0, DEFAULT, DEFAULT);
INSERT INTO `DeliVariety`.`DV_RESERVATION` (`table_id`, `table_state`, `email`, `lastname`) VALUES (8, 0, DEFAULT, DEFAULT);

COMMIT;

